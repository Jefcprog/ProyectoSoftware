<app-navbar></app-navbar>

<div class="mt-3 ms-4">
    <h1 class="text-primary">Mantenimiento de Personas</h1>
</div>
<div class=" mt-3 container">
    <div class="">
        <form action="" [formGroup]="form">
            <label for="buscarId">Busqueda por apellido o cedula</label>
            <div class="d-flex flex-row aling-items-center justify-content-center mt-3">
                <input class="form-control " type="text" id="buscarId"
                formControlName="search" [class.is-invalid]="getInvalid('search')">
                <button class="btn btn-primary search ms-3" (click)="GetPerson()"><i class="bi bi-search" ></i></button>
            </div>
        </form>
    </div>
    <div class="mt-3  ">
        <p-table [value]="personList" [tableStyle]="{ 'min-width': '35rem' }">
            <ng-template pTemplate="header">
                <tr>
                    <th>Identificación</th>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>NameUser</th>
                    <th>Rol</th>
                    <th>Sexo</th>
                    <th>Estado Civil</th>
                    <th>Occupación</th>
                    <th>Phone</th>
                    <th>Nacionalidad</th>
                    <th>Address</th>
                    <th>Fecha de Nacimiento</th>
                    <th>Fecha de Creación</th>                    
                    <th>Options</th>                    
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-person>
                <tr>
                    <td><input class="form-control inputEdit" type="text" [id]="'identification'+person.personaId" [(ngModel)]="person.identification" disabled></td>
                    <td><input class="form-control inputEdit" type="text" [id]="'name'+person.personaId" [(ngModel)]="person.name" disabled></td>
                    <td><input class="form-control inputEdit" type="text" [id]="'lastName'+person.personaId" [(ngModel)]="person.lastName" disabled></td>
                    <td><input class="form-control inputEdit" type="text" [id]="'nameUser'+person.personaId" [(ngModel)]="person.nameUser" disabled></td>
                    <td><input class="form-control inputEdit" type="text" [id]="'rol'+person.personaId" [(ngModel)]="person.rol" disabled></td>
                    <td><select class="form-control inputEdit" type="text" [id]="'descriptionSex'+person.personaId" [(ngModel)]="person.sexId" disabled>
                        @for (item of sexList; track $index) {
                            <option [value]="item.sexId">{{item.description}}</option>
                        }
                    </select></td>
                    <td><select class="form-control inputEdit" type="text" [id]="'maritalStatus'+person.personaId" [(ngModel)]="person.maritalStatus" disabled>
                        <option value="" selected disabled>Seleccione el estado civil</option>
                        <option value="Soltero/a">Soltero/a</option>
                        <option value="Casado/a">Casado/a</option>
                        <option value="Divorciado/a">Divorciado/a</option>
                    </select></td>
                    <td><input class="form-control inputEdit" type="text" [id]="'occupation'+person.personaId" [(ngModel)]="person.occupation" disabled></td>
                    <td><input class="form-control inputEdit" type="text" [id]="'phone'+person.personaId" [(ngModel)]="person.phone" disabled></td>
                    <td><input class="form-control inputEdit" type="text" [id]="'nationality'+person.personaId" [(ngModel)]="person.nationality" disabled></td>
                    <td><input class="form-control inputEdit" type="text" [id]="'address'+person.personaId" [(ngModel)]="person.address" disabled></td>
                    <td><input class="form-control inputEdit" type="date" [id]="'dateBirth'+person.personaId" [(ngModel)]="person.dateBirth" disabled></td>
                    <td><input class="form-control inputEdit" type="text" [id]="'dateCreate'+person.personaId"[value]="person.dateCreate | date"  disabled></td>
                    <td class="d-flex flex-row">
                        <button class="btn btn-primary" (click)="UpdatePerson(person)"><i class="bi bi-pencil-fill"></i></button>
                        <button class="btn btn-danger ms-2"><i class="bi bi-trash3-fill" (click)="DeletePerson(person)"></i></button>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>